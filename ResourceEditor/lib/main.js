"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function _arrayWithHoles(a){if(Array.isArray(a))return a}var countTableElement=0,parseBool=function(a){return!("true"!==a.toLowerCase())||"false"!==a.toLowerCase()&&!1},createInput=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"";return $("<input></input>",{type:"text",class:"".concat(c," form-control d-inline w-100"),id:"id".concat(a,"_").concat(b),name:"".concat(a,"_").concat(b),value:d})},createButton=function(a,b,c){return $("<button></button>",{type:"button",class:"".concat(c),id:"id".concat(a,"_").concat(b),name:"button".concat(a,"_").concat(b),value:"id".concat(a,"_").concat(b),text:"".concat(a)})},createRow=function(a,b){if(!$.isEmptyObject(a)){var c=$("#mainTable").children("tbody").append("<tr id=\"tableRow_".concat(b,"\"></tr>")).children("tr").last();c.append("<th scope=\"row\"></th>").children("th").last().append(createInput("Id",b,"inputResourseData",a.Id)),c.append("<td></td>").children("td").last().append(createInput("Value",b,"inputResourseData",a.Value)),c.append("<td></td>").children("td").last().append(createInput("Comment",b,"inputResourseData",a.Comment)),c.append("<td></td>").children("td").last().append(createButton("Save",b,"saveLineButton btn btn-success d-inline w-100")),c.append("<td></td>").children("td").last().append(createButton("Delete",b,"deleteLineButton btn btn-danger d-inline w-100"))}},createTable=function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g,h=a[Symbol.iterator]();!(c=(f=h.next()).done);c=!0)g=f.value,createRow(g,b),b++}catch(a){d=!0,e=a}finally{try{c||null==h.return||h.return()}finally{if(d)throw e}}return b};///Method
///Method save row
///Method delete row
$("#addTableRow").on("click",null,function(){createRow({Id:"",Value:"",Comment:""},countTableElement),countTableElement++}),$("#rootMainTable").on("change",".inputResourseData",null,function(b){var c=$(b.target),d=c.closest("tr").children("td").children("button");//$(this);
d.attr("disabled",!1)}),$("#rootMainTable").on("click",".saveLineButton",null,function(a){var b=$(a.target),c=b.closest("tr").find("input"),d=_slicedToArray(c,3),e=d[0],f=d[1],g=d[2];b.closest("tr").find("input").each(function(a,b){console.log(b)}),$.ajax({type:"POST",url:urlControlActionUpdate,data:{Language:$("#countrySelect").val(),rowUpdate:{Id:$(e).val(),Value:$(f).val(),Comment:$(g).val()}},success:function c(a){""===a?(b.addClass("btn-warning"),$(e).addClass("is-invalid")):(b.removeClass("btn-warning"),$(e).removeClass("is-invalid"),b.attr("disabled",!0))},error:function d(a,b,c){console.error(a),console.error(b),console.error(c)}})}),$("#rootMainTable").on("click",".deleteLineButton",null,function(a){if(confirm("Delete?")){var b=$(a.target),c=b.closest("tr").find("input"),d=$(c[0]),e=$(c[1]),f=$(c[2]);//$(this);
$.ajax({type:"POST",url:urlControlActionDelete,data:{Language:$("#countrySelect").val(),rowDelete:{Id:d.val(),Value:e.val(),Comment:f.val()}},success:function d(a,c){console.log(c),$(a)&&b.closest("tr").empty()},error:function d(a,b,c){console.error(a),console.error(b),console.error(c)}})}}),$("#countrySelect").on("change",null,null,function(a){var b=$(a.target);//$(this);
""!==b.val()&&localStorage.setItem("countrySelect",b.val().toString()),$.ajax({type:"POST",url:urlControlSwitchLanguage,data:{Language:b.val()},success:function b(a){$("#mainDataBodyTable").empty(),countTableElement=createTable(a,countTableElement)},error:function d(a,b,c){console.error(a),console.error(b),console.error(c)}})}),$(window).on("load",function(){/** код будет запущен когда страница будет полностью загружена, включая все фреймы, объекты и изображения **/var a=localStorage.getItem("countrySelect");$("#countrySelect").val(a).trigger("change")}),window.onload=function(){//document.getElementById('countrySelect').addEventListener('select', () => {
//}, false);
};